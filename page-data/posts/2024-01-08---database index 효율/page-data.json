{"componentChunkName":"component---src-templates-post-template-post-template-tsx","path":"/posts/2024-01-08---database index 효율/","result":{"data":{"markdownRemark":{"id":"3a7a079f-13ef-5186-ba4d-4d48640135de","html":"<p>index는 database의 검색속도를 향상시키는 도구이다.</p>\n<p>index를 걸 때 우리는 중복도가 낮고, 자주 바뀌지 않는 column에 하게 된다. 여기서 중복도에 따라 인덱싱을 했을 때 차이를 알아보자.</p>\n<p>database는 mysql에서 제공하는 sample employees를 이용했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">mysql<span class=\"token operator\">></span> <span class=\"token keyword\">show</span> <span class=\"token keyword\">tables</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----------------------+</span>\n<span class=\"token operator\">|</span> Tables_in_employees  <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----------------------+</span>\n<span class=\"token operator\">|</span> current_dept_emp     <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> departments          <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> dept_emp             <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> dept_emp_latest_date <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> dept_manager         <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> employees            <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> salaries             <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> titles               <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----------------------+</span>\n<span class=\"token number\">8</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.01</span> sec<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">--</span>\nmysql<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> <span class=\"token function\">COUNT</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">from</span> salaries<span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----------+</span>\n<span class=\"token operator\">|</span> <span class=\"token function\">COUNT</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----------+</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">2844047</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----------+</span>\n<span class=\"token number\">1</span> <span class=\"token keyword\">row</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.08</span> sec<span class=\"token punctuation\">)</span>\n</code></pre></div>\n<p>여기서 가장 데이터가 많은 salaries 테이블을 이용해서 테스트를 해보자.</p>\n<p>우선 <code class=\"language-text\">show create table salaries</code>를 하면 아래와 같은 결과를 볼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>salaries<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>emp_no<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">int</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>salary<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">int</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>from_date<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">date</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>to_date<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">date</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>emp_no<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">,</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>from_date<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">CONSTRAINT</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>salaries_ibfk_1<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">FOREIGN</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>emp_no<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">REFERENCES</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>employees<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>emp_no<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">ON</span> <span class=\"token keyword\">DELETE</span> <span class=\"token keyword\">CASCADE</span>\n<span class=\"token punctuation\">)</span> <span class=\"token keyword\">ENGINE</span><span class=\"token operator\">=</span><span class=\"token keyword\">InnoDB</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token keyword\">CHARSET</span><span class=\"token operator\">=</span>utf8mb4 <span class=\"token keyword\">COLLATE</span><span class=\"token operator\">=</span>utf8mb4_0900_ai_ci</code></pre></div>\n<p>pk로 emp_no과 from_date의 조합으로 되어 있고, emp_no에 인덱싱이 되어 있는 걸 볼 수 있다.(pk)\n여기서 중복도를 체크해보자면</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">mysql<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> <span class=\"token function\">COUNT</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">DISTINCT</span><span class=\"token punctuation\">(</span>from_date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> from_date<span class=\"token punctuation\">,</span> <span class=\"token function\">COUNT</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">DISTINCT</span><span class=\"token punctuation\">(</span>to_date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> to_date<span class=\"token punctuation\">,</span> <span class=\"token function\">COUNT</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">DISTINCT</span><span class=\"token punctuation\">(</span>emp_no<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> emp_no<span class=\"token punctuation\">,</span> <span class=\"token function\">COUNT</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">DISTINCT</span><span class=\"token punctuation\">(</span>salary<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> salary <span class=\"token keyword\">from</span> salaries<span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">-----------+---------+--------+--------+</span>\n<span class=\"token operator\">|</span> from_date <span class=\"token operator\">|</span> to_date <span class=\"token operator\">|</span> emp_no <span class=\"token operator\">|</span> salary <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">-----------+---------+--------+--------+</span>\n<span class=\"token operator\">|</span>      <span class=\"token number\">6392</span> <span class=\"token operator\">|</span>    <span class=\"token number\">6120</span> <span class=\"token operator\">|</span> <span class=\"token number\">300024</span> <span class=\"token operator\">|</span>  <span class=\"token number\">85814</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">-----------+---------+--------+--------+</span>\n<span class=\"token number\">1</span> <span class=\"token keyword\">row</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">2.91</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<p>위와 같은 결과를 볼 수 있다. to_date에 중복도가 가장 높고, pk를 제외하면 salary가 중복도가 가장 낮은 걸 확인할 수 있다.</p>\n<p>여기서 중복도가 가장 높고, 가장 낮은 to_date와 salary를 이용해 쿼리를 하나 날려보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">mysql<span class=\"token operator\">></span> <span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> salaries  <span class=\"token keyword\">WHERE</span> salary <span class=\"token operator\">=</span> <span class=\"token number\">74447</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">--------+--------+------------+------------+</span>\n<span class=\"token operator\">|</span> emp_no <span class=\"token operator\">|</span> salary <span class=\"token operator\">|</span> from_date  <span class=\"token operator\">|</span> to_date    <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">--------+--------+------------+------------+</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">16772</span> <span class=\"token operator\">|</span>  <span class=\"token number\">74447</span> <span class=\"token operator\">|</span> <span class=\"token number\">2000</span><span class=\"token operator\">-</span><span class=\"token number\">10</span><span class=\"token operator\">-</span><span class=\"token number\">26</span> <span class=\"token operator\">|</span> <span class=\"token number\">2001</span><span class=\"token operator\">-</span><span class=\"token number\">10</span><span class=\"token operator\">-</span><span class=\"token number\">26</span> <span class=\"token operator\">|</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">483839</span> <span class=\"token operator\">|</span>  <span class=\"token number\">74447</span> <span class=\"token operator\">|</span> <span class=\"token number\">1992</span><span class=\"token operator\">-</span><span class=\"token number\">06</span><span class=\"token operator\">-</span><span class=\"token number\">19</span> <span class=\"token operator\">|</span> <span class=\"token number\">1993</span><span class=\"token operator\">-</span><span class=\"token number\">06</span><span class=\"token operator\">-</span><span class=\"token number\">19</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">--------+--------+------------+------------+</span>\n<span class=\"token number\">38</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.65</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<p>2844047개의 데이터 중 38개의 데이터가 나왔고, 시간은 0.65초가 걸렸다.</p>\n<p>여기에 중복도가 가장 낮은 salary 컬럼에 인덱싱을 해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">mysql<span class=\"token operator\">></span> <span class=\"token keyword\">create</span> <span class=\"token keyword\">index</span> salary_index <span class=\"token keyword\">on</span> salaries <span class=\"token punctuation\">(</span>salary<span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token punctuation\">;</span>\nQuery OK<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span> <span class=\"token keyword\">rows</span> affected <span class=\"token punctuation\">(</span><span class=\"token number\">3.43</span> sec<span class=\"token punctuation\">)</span>\nRecords: <span class=\"token number\">0</span>  Duplicates: <span class=\"token number\">0</span>  <span class=\"token keyword\">Warnings</span>: <span class=\"token number\">0</span></code></pre></div>\n<p>인덱스를 생성하는데 총 3.43초가 걸렸다. 그러면 인덱스가 생겼는지 확인해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">mysql<span class=\"token operator\">></span> <span class=\"token keyword\">show</span> <span class=\"token keyword\">create</span> <span class=\"token keyword\">table</span> salaries<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>salaries<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>emp_no<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">int</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>salary<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">int</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>from_date<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">date</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>to_date<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">date</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>emp_no<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">,</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>from_date<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>salary_index<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>salary<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">CONSTRAINT</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>salaries_ibfk_1<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">FOREIGN</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>emp_no<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">REFERENCES</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>employees<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>emp_no<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">ON</span> <span class=\"token keyword\">DELETE</span> <span class=\"token keyword\">CASCADE</span>\n<span class=\"token punctuation\">)</span> <span class=\"token keyword\">ENGINE</span><span class=\"token operator\">=</span><span class=\"token keyword\">InnoDB</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token keyword\">CHARSET</span><span class=\"token operator\">=</span>utf8mb4 <span class=\"token keyword\">COLLATE</span><span class=\"token operator\">=</span>utf8mb4_0900_ai_ci</code></pre></div>\n<p>salary_index로 넣어준 인덱스가 제대로 걸려있는 걸 확인할 수 있다. 그러면 다시 아까 날렸던 쿼리를 날려보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">mysql<span class=\"token operator\">></span> <span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> salaries <span class=\"token keyword\">USE</span> <span class=\"token keyword\">INDEX</span> <span class=\"token punctuation\">(</span>salary_index<span class=\"token punctuation\">)</span> <span class=\"token keyword\">WHERE</span> salary <span class=\"token operator\">=</span> <span class=\"token number\">74447</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">--------+--------+------------+------------+</span>\n<span class=\"token operator\">|</span> emp_no <span class=\"token operator\">|</span> salary <span class=\"token operator\">|</span> from_date  <span class=\"token operator\">|</span> to_date    <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">--------+--------+------------+------------+</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">16772</span> <span class=\"token operator\">|</span>  <span class=\"token number\">74447</span> <span class=\"token operator\">|</span> <span class=\"token number\">2000</span><span class=\"token operator\">-</span><span class=\"token number\">10</span><span class=\"token operator\">-</span><span class=\"token number\">26</span> <span class=\"token operator\">|</span> <span class=\"token number\">2001</span><span class=\"token operator\">-</span><span class=\"token number\">10</span><span class=\"token operator\">-</span><span class=\"token number\">26</span> <span class=\"token operator\">|</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">483839</span> <span class=\"token operator\">|</span>  <span class=\"token number\">74447</span> <span class=\"token operator\">|</span> <span class=\"token number\">1992</span><span class=\"token operator\">-</span><span class=\"token number\">06</span><span class=\"token operator\">-</span><span class=\"token number\">19</span> <span class=\"token operator\">|</span> <span class=\"token number\">1993</span><span class=\"token operator\">-</span><span class=\"token number\">06</span><span class=\"token operator\">-</span><span class=\"token number\">19</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">--------+--------+------------+------------+</span>\n<span class=\"token number\">38</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<p>이전 0.65초가 걸린 것보다 훨씬 빠르게 데이터를 가져왔다. workbench로 확인해보면 0.0014초가 걸렸다고 한다.</p>\n<p>그러면 이제 to_date에 걸어서 확인을 해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">mysql<span class=\"token operator\">></span> <span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> salaries  <span class=\"token keyword\">WHERE</span> to_date <span class=\"token operator\">=</span> <span class=\"token string\">'1993-11-04'</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">--------+--------+------------+------------+</span>\n<span class=\"token operator\">|</span> emp_no <span class=\"token operator\">|</span> salary <span class=\"token operator\">|</span> from_date  <span class=\"token operator\">|</span> to_date    <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">--------+--------+------------+------------+</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">10273</span> <span class=\"token operator\">|</span>  <span class=\"token number\">88989</span> <span class=\"token operator\">|</span> <span class=\"token number\">1992</span><span class=\"token operator\">-</span><span class=\"token number\">11</span><span class=\"token operator\">-</span><span class=\"token number\">04</span> <span class=\"token operator\">|</span> <span class=\"token number\">1993</span><span class=\"token operator\">-</span><span class=\"token number\">11</span><span class=\"token operator\">-</span><span class=\"token number\">04</span> <span class=\"token operator\">|</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">499285</span> <span class=\"token operator\">|</span>  <span class=\"token number\">45284</span> <span class=\"token operator\">|</span> <span class=\"token number\">1992</span><span class=\"token operator\">-</span><span class=\"token number\">11</span><span class=\"token operator\">-</span><span class=\"token number\">04</span> <span class=\"token operator\">|</span> <span class=\"token number\">1993</span><span class=\"token operator\">-</span><span class=\"token number\">11</span><span class=\"token operator\">-</span><span class=\"token number\">04</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">--------+--------+------------+------------+</span>\n<span class=\"token number\">409</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.66</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<p>총 409개의 데이터를 가져왔고 0.66초가 걸렸다.</p>\n<p>이제 인덱스를 걸고 확인을 해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">mysql<span class=\"token operator\">></span> <span class=\"token keyword\">create</span> <span class=\"token keyword\">index</span> td_idx <span class=\"token keyword\">on</span> salaries <span class=\"token punctuation\">(</span>to_date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nQuery OK<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span> <span class=\"token keyword\">rows</span> affected <span class=\"token punctuation\">(</span><span class=\"token number\">3.38</span> sec<span class=\"token punctuation\">)</span>\nRecords: <span class=\"token number\">0</span>  Duplicates: <span class=\"token number\">0</span>  <span class=\"token keyword\">Warnings</span>: <span class=\"token number\">0</span>\n<span class=\"token comment\">--</span>\nmysql<span class=\"token operator\">></span> <span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> salaries <span class=\"token keyword\">USE</span> <span class=\"token keyword\">INDEX</span> <span class=\"token punctuation\">(</span>td_idx<span class=\"token punctuation\">)</span> <span class=\"token keyword\">WHERE</span> to_date <span class=\"token operator\">=</span> <span class=\"token string\">'1993-11-04'</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">--------+--------+------------+------------+</span>\n<span class=\"token operator\">|</span> emp_no <span class=\"token operator\">|</span> salary <span class=\"token operator\">|</span> from_date  <span class=\"token operator\">|</span> to_date    <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">--------+--------+------------+------------+</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">10273</span> <span class=\"token operator\">|</span>  <span class=\"token number\">88989</span> <span class=\"token operator\">|</span> <span class=\"token number\">1992</span><span class=\"token operator\">-</span><span class=\"token number\">11</span><span class=\"token operator\">-</span><span class=\"token number\">04</span> <span class=\"token operator\">|</span> <span class=\"token number\">1993</span><span class=\"token operator\">-</span><span class=\"token number\">11</span><span class=\"token operator\">-</span><span class=\"token number\">04</span> <span class=\"token operator\">|</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">499285</span> <span class=\"token operator\">|</span>  <span class=\"token number\">45284</span> <span class=\"token operator\">|</span> <span class=\"token number\">1992</span><span class=\"token operator\">-</span><span class=\"token number\">11</span><span class=\"token operator\">-</span><span class=\"token number\">04</span> <span class=\"token operator\">|</span> <span class=\"token number\">1993</span><span class=\"token operator\">-</span><span class=\"token number\">11</span><span class=\"token operator\">-</span><span class=\"token number\">04</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">--------+--------+------------+------------+</span>\n<span class=\"token number\">409</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.01</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<p>이 역시도 확연하게 줄어든 것을 확인할 수 있지만 중복도가 낮은 salary 컬럼에 비해 적은 걸 확인할 수 있다.\n위의 쿼리는 workbench로 확인했을 때 0.0069초가 걸렸다.</p>\n<p>중복도에 따라 인덱싱을 했을 때 효율의 차이를 알아볼 수 있었다. 더 많은 데이터에서 테스트를 했다면 더 확연한게 차이를 볼 수 있을 것 같다.</p>","fields":{"slug":"/posts/2024-01-08---database index 효율/","tagSlugs":["/tag/mysql/"]},"frontmatter":{"date":"2024-01-08T12:36:37.121Z","description":"database index 효율","tags":["mysql"],"title":"database index 효율","socialImage":null}}},"pageContext":{"slug":"/posts/2024-01-08---database index 효율/"}},"staticQueryHashes":["251939775","2764776372","401334301"]}