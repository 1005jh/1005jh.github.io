{"componentChunkName":"component---src-templates-post-template-post-template-tsx","path":"/posts/2023-12-18---Next.js 14버전 AWS Amplify 배포/","result":{"data":{"markdownRemark":{"id":"2ac14916-f319-533f-b38a-4e4ff70179d0","html":"<p>11월 초 next.js 14버전의 aws amplify 배포를 하며 겪었던 문제이다.\naliy 프로젝트에서 nextjs의 배포를 aws amplify를 이용하기로 했었다. 그러나 nextjs 14버전은 빌드 시 node 버전이 18버전 이상이여야 하는 이슈가 있었다.\naws amplify cli에서 제공하는 node 버전은 17버전까지가 끝이었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">## Install AWS Amplify CLI for all node versions\nRUN /bin/bash -c \". ~/.nvm/nvm.sh &amp;&amp; nvm use ${VERSION_NODE_8} &amp;&amp; \\\n    npm config set user 0 &amp;&amp; npm config set unsafe-perm true &amp;&amp; \\\n\tnpm install -g @aws-amplify/cli@${VERSION_AMPLIFY}\"\nRUN /bin/bash -c \". ~/.nvm/nvm.sh &amp;&amp; nvm use ${VERSION_NODE_10} &amp;&amp; \\\n    npm config set user 0 &amp;&amp; npm config set unsafe-perm true &amp;&amp; \\\n\tnpm install -g @aws-amplify/cli@${VERSION_AMPLIFY}\"\nRUN /bin/bash -c \". ~/.nvm/nvm.sh &amp;&amp; nvm use ${VERSION_NODE_12} &amp;&amp; \\\n    npm config set user 0 &amp;&amp; npm config set unsafe-perm true &amp;&amp; \\\n\tnpm install -g @aws-amplify/cli@${VERSION_AMPLIFY}\"\nRUN /bin/bash -c \". ~/.nvm/nvm.sh &amp;&amp; nvm use ${VERSION_NODE_14} &amp;&amp; \\\n    npm config set user 0 &amp;&amp; npm config set unsafe-perm true &amp;&amp; \\\n\tnpm install -g @aws-amplify/cli@${VERSION_AMPLIFY}\"\nRUN /bin/bash -c \". ~/.nvm/nvm.sh &amp;&amp; nvm use ${VERSION_NODE_16} &amp;&amp; \\\n    npm config set user 0 &amp;&amp; npm config set unsafe-perm true &amp;&amp; \\\n\tnpm install -g @aws-amplify/cli@${VERSION_AMPLIFY}\"\nRUN /bin/bash -c \". ~/.nvm/nvm.sh &amp;&amp; nvm use ${VERSION_NODE_17}  &amp;&amp; \\\n    npm config set user 0 &amp;&amp; npm config set unsafe-perm true &amp;&amp; \\\n\tnpm install -g @aws-amplify/cli@${VERSION_AMPLIFY}\"</code></pre></div>\n<p>빌드를 하는 과정에서 node 버전에 대한 이슈로 에러가 생겼고, nextjs의 14버전을 aws apmlify에 배포하기 위해선 node의 버전을 바꿔주는 추가적인 작업이 필요했다.</p>\n<p>amplify의 배포설정에서 빌드 이미지 세팅에 node 버전을 바꿔주고 해결할 수 있었는데\nnode version을 선택하고 <code class=\"language-text\">public.ecr.aws/docker/library/node:18.18.2</code> 을 입력해 node 버전의 문제를 해결할 수 있었다.</p>\n<p>참고\n<a href=\"https://github.com/aws-amplify/amplify-hosting/issues/3773\"><a href=\"https://github.com/aws-amplify/amplify-hosting/issues/3773\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/aws-amplify/amplify-hosting/issues/3773</a></a></p>","fields":{"slug":"/posts/2023-12-18---Next.js 14버전 AWS Amplify 배포/","tagSlugs":["/tag/nextjs/","/tag/amplify/"]},"frontmatter":{"date":"2023-12-18T12:36:37.121Z","description":"Next.js 14버전 AWS Amplify 배포","tags":["nextjs","amplify"],"title":"Next.js 14버전 AWS Amplify 배포","socialImage":null}}},"pageContext":{"slug":"/posts/2023-12-18---Next.js 14버전 AWS Amplify 배포/"}},"staticQueryHashes":["251939775","2764776372","401334301"]}