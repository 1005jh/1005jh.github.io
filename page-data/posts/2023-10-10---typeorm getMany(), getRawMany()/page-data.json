{"componentChunkName":"component---src-templates-post-template-post-template-tsx","path":"/posts/2023-10-10---typeorm getMany(), getRawMany()/","result":{"data":{"markdownRemark":{"id":"52fb8ebf-f819-5a6a-8bfd-efa754b4cbec","html":"<p>쿼리빌더를 사용할 때 쓰게되는 getMany()와 getRawMany()\n이 둘의 차이를 알아보자.</p>\n<p>우선 getMany()를 타고 들어가보면</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token function\">getMany</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span>Entity<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n    Gets entities returned by execution <span class=\"token keyword\">of</span> generated query builder sql<span class=\"token punctuation\">.</span></code></pre></div>\n<p>위처럼 실행된 쿼리빌더의 sql에서 반환된 엔티티를 가져온다고 되어있다.</p>\n<p>소스코드를 보면</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">async</span> <span class=\"token function\">getMany</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span>Entity<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>lockMode <span class=\"token operator\">===</span> <span class=\"token string\">\"optimistic\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">OptimisticLockCanNotBeUsedError</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">const</span> results <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getRawAndEntities</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> results<span class=\"token punctuation\">.</span>entities\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p>getMany는 getRawAndEntities 메서드를 통해 가져온 값에서 엔티티를 반환하는 것을 알 수 있다.</p>\n<p>여기서 getRawAndEntities를 보면</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">async</span> <span class=\"token generic-function\"><span class=\"token function\">getRawAndEntities</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token punctuation\">{</span>\n        entities<span class=\"token operator\">:</span> Entity<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n        raw<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> queryRunner <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">obtainQueryRunner</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">let</span> transactionStartedByUs<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// start transaction if it was enabled</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>useTransaction <span class=\"token operator\">===</span> <span class=\"token boolean\">true</span> <span class=\"token operator\">&amp;&amp;</span>\n                queryRunner<span class=\"token punctuation\">.</span>isTransactionActive <span class=\"token operator\">===</span> <span class=\"token boolean\">false</span>\n            <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">await</span> queryRunner<span class=\"token punctuation\">.</span><span class=\"token function\">startTransaction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                transactionStartedByUs <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>queryEntity <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n            <span class=\"token keyword\">const</span> results <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">executeEntitiesAndRawResults</span><span class=\"token punctuation\">(</span>queryRunner<span class=\"token punctuation\">)</span>\n\n            <span class=\"token comment\">// close transaction if we started it</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>transactionStartedByUs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">await</span> queryRunner<span class=\"token punctuation\">.</span><span class=\"token function\">commitTransaction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">return</span> results\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// rollback transaction if we started it</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>transactionStartedByUs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">await</span> queryRunner<span class=\"token punctuation\">.</span><span class=\"token function\">rollbackTransaction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>rollbackError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">throw</span> error\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>queryRunner <span class=\"token operator\">!==</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>queryRunner<span class=\"token punctuation\">)</span>\n                <span class=\"token comment\">// means we created our own query runner</span>\n                <span class=\"token keyword\">await</span> queryRunner<span class=\"token punctuation\">.</span><span class=\"token function\">release</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p>쿼리빌더에서 생성된 sql을 실행하고 <code class=\"language-text\">executeEntitiesAndRawResults()</code>에서의 반환값을 리턴하는 것을 알 수 있다.</p>\n<p><code class=\"language-text\">executeEntitiesAndRawResults()</code>로 들어가보자</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">protected</span> <span class=\"token keyword\">async</span> <span class=\"token function\">executeEntitiesAndRawResults</span><span class=\"token punctuation\">(</span>\n        queryRunner<span class=\"token operator\">:</span> QueryRunner<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token punctuation\">{</span> entities<span class=\"token operator\">:</span> Entity<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> raw<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>mainAlias<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TypeORMError</span><span class=\"token punctuation\">(</span>\n                <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Alias is not set. Use \"from\" method to set an alias.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>lockMode <span class=\"token operator\">===</span> <span class=\"token string\">\"pessimistic_read\"</span> <span class=\"token operator\">||</span>\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>lockMode <span class=\"token operator\">===</span> <span class=\"token string\">\"pessimistic_write\"</span> <span class=\"token operator\">||</span>\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>lockMode <span class=\"token operator\">===</span> <span class=\"token string\">\"pessimistic_partial_write\"</span> <span class=\"token operator\">||</span>\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>lockMode <span class=\"token operator\">===</span> <span class=\"token string\">\"pessimistic_write_or_fail\"</span> <span class=\"token operator\">||</span>\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>lockMode <span class=\"token operator\">===</span> <span class=\"token string\">\"for_no_key_update\"</span> <span class=\"token operator\">||</span>\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>lockMode <span class=\"token operator\">===</span> <span class=\"token string\">\"for_key_share\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span>\n            <span class=\"token operator\">!</span>queryRunner<span class=\"token punctuation\">.</span>isTransactionActive\n        <span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PessimisticLockTransactionRequiredError</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>lockMode <span class=\"token operator\">===</span> <span class=\"token string\">\"optimistic\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">const</span> metadata <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>mainAlias<span class=\"token punctuation\">.</span>metadata\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>metadata<span class=\"token punctuation\">.</span>versionColumn <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>metadata<span class=\"token punctuation\">.</span>updateDateColumn<span class=\"token punctuation\">)</span>\n                <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">NoVersionOrUpdateDateColumnError</span><span class=\"token punctuation\">(</span>metadata<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">const</span> relationIdLoader <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RelationIdLoader</span><span class=\"token punctuation\">(</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>connection<span class=\"token punctuation\">,</span>\n            queryRunner<span class=\"token punctuation\">,</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>relationIdAttributes<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">const</span> relationCountLoader <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RelationCountLoader</span><span class=\"token punctuation\">(</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>connection<span class=\"token punctuation\">,</span>\n            queryRunner<span class=\"token punctuation\">,</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>relationCountAttributes<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">const</span> relationIdMetadataTransformer <span class=\"token operator\">=</span>\n            <span class=\"token keyword\">new</span> <span class=\"token class-name\">RelationIdMetadataToAttributeTransformer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">)</span>\n        relationIdMetadataTransformer<span class=\"token punctuation\">.</span><span class=\"token function\">transform</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">const</span> relationCountMetadataTransformer <span class=\"token operator\">=</span>\n            <span class=\"token keyword\">new</span> <span class=\"token class-name\">RelationCountMetadataToAttributeTransformer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">)</span>\n        relationCountMetadataTransformer<span class=\"token punctuation\">.</span><span class=\"token function\">transform</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">let</span> rawResults<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            entities<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n        <span class=\"token comment\">// for pagination enabled (e.g. skip and take) its much more complicated - its a special process</span>\n        <span class=\"token comment\">// where we make two queries to find the data we need</span>\n        <span class=\"token comment\">// first query find ids in skip and take range</span>\n        <span class=\"token comment\">// and second query loads the actual data in given ids range</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>skip <span class=\"token operator\">||</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>take<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>joinAttributes<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">0</span>\n        <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// we are skipping order by here because its not working in subqueries anyway</span>\n            <span class=\"token comment\">// to make order by working we need to apply it on a distinct query</span>\n            <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>selects<span class=\"token punctuation\">,</span> orderBys<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span>\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createOrderByCombinedWithSelectExpression</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"distinctAlias\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">const</span> metadata <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>mainAlias<span class=\"token punctuation\">.</span>metadata\n            <span class=\"token keyword\">const</span> mainAliasName <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>mainAlias<span class=\"token punctuation\">.</span>name\n\n            <span class=\"token keyword\">const</span> querySelects <span class=\"token operator\">=</span> metadata<span class=\"token punctuation\">.</span>primaryColumns<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>\n                <span class=\"token punctuation\">(</span>primaryColumn<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">const</span> distinctAlias <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">escape</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"distinctAlias\"</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token keyword\">const</span> columnAlias <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">escape</span><span class=\"token punctuation\">(</span>\n                        DriverUtils<span class=\"token punctuation\">.</span><span class=\"token function\">buildAlias</span><span class=\"token punctuation\">(</span>\n                            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>connection<span class=\"token punctuation\">.</span>driver<span class=\"token punctuation\">,</span>\n                            <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">,</span>\n                            mainAliasName<span class=\"token punctuation\">,</span>\n                            primaryColumn<span class=\"token punctuation\">.</span>databaseName<span class=\"token punctuation\">,</span>\n                        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token punctuation\">)</span>\n                    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>orderBys<span class=\"token punctuation\">[</span>columnAlias<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n                        <span class=\"token comment\">// make sure we aren't overriding user-defined order in inverse direction</span>\n                        orderBys<span class=\"token punctuation\">[</span>columnAlias<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"ASC\"</span>\n\n                    <span class=\"token keyword\">const</span> alias <span class=\"token operator\">=</span> DriverUtils<span class=\"token punctuation\">.</span><span class=\"token function\">buildAlias</span><span class=\"token punctuation\">(</span>\n                        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>connection<span class=\"token punctuation\">.</span>driver<span class=\"token punctuation\">,</span>\n                        <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token string\">\"ids_\"</span> <span class=\"token operator\">+</span> mainAliasName<span class=\"token punctuation\">,</span>\n                        primaryColumn<span class=\"token punctuation\">.</span>databaseName<span class=\"token punctuation\">,</span>\n                    <span class=\"token punctuation\">)</span>\n\n                    <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>distinctAlias<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>columnAlias<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> AS </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">escape</span><span class=\"token punctuation\">(</span>\n                        alias<span class=\"token punctuation\">,</span>\n                    <span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">)</span>\n\n            <span class=\"token keyword\">const</span> originalQuery <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n            <span class=\"token comment\">// preserve original timeTravel value since we set it to \"false\" in subquery</span>\n            <span class=\"token keyword\">const</span> originalQueryTimeTravel <span class=\"token operator\">=</span>\n                originalQuery<span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>timeTravel\n\n            rawResults <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SelectQueryBuilder</span><span class=\"token punctuation\">(</span>\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>connection<span class=\"token punctuation\">,</span>\n                queryRunner<span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">DISTINCT </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>querySelects<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">\", \"</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">addSelect</span><span class=\"token punctuation\">(</span>selects<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>\n                    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>originalQuery\n                        <span class=\"token punctuation\">.</span><span class=\"token function\">orderBy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                        <span class=\"token punctuation\">.</span><span class=\"token function\">timeTravelQuery</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// set it to \"false\" since time travel clause must appear at the very end and applies to the entire SELECT clause.</span>\n                        <span class=\"token punctuation\">.</span><span class=\"token function\">getQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n                    <span class=\"token string\">\"distinctAlias\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">timeTravelQuery</span><span class=\"token punctuation\">(</span>originalQueryTimeTravel<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">offset</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>skip<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">limit</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>take<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">orderBy</span><span class=\"token punctuation\">(</span>orderBys<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">cache</span><span class=\"token punctuation\">(</span>\n                    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>cache <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>cacheId\n                        <span class=\"token operator\">?</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>cacheId<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-pagination</span><span class=\"token template-punctuation string\">`</span></span>\n                        <span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>cache<span class=\"token punctuation\">,</span>\n                    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>cacheDuration<span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">setParameters</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getParameters</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">setNativeParameters</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>nativeParameters<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">getRawMany</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>rawResults<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">let</span> condition <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span>\n                <span class=\"token keyword\">const</span> parameters<span class=\"token operator\">:</span> ObjectLiteral <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>metadata<span class=\"token punctuation\">.</span>hasMultiplePrimaryKeys<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    condition <span class=\"token operator\">=</span> rawResults\n                        <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                            <span class=\"token keyword\">return</span> metadata<span class=\"token punctuation\">.</span>primaryColumns\n                                <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>primaryColumn<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                                    <span class=\"token keyword\">const</span> paramKey <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">orm_distinct_ids_</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>index<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">_</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>primaryColumn<span class=\"token punctuation\">.</span>databaseName<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n                                    <span class=\"token keyword\">const</span> paramKeyResult <span class=\"token operator\">=</span>\n                                        DriverUtils<span class=\"token punctuation\">.</span><span class=\"token function\">buildAlias</span><span class=\"token punctuation\">(</span>\n                                            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>connection<span class=\"token punctuation\">.</span>driver<span class=\"token punctuation\">,</span>\n                                            <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">,</span>\n                                            <span class=\"token string\">\"ids_\"</span> <span class=\"token operator\">+</span> mainAliasName<span class=\"token punctuation\">,</span>\n                                            primaryColumn<span class=\"token punctuation\">.</span>databaseName<span class=\"token punctuation\">,</span>\n                                        <span class=\"token punctuation\">)</span>\n                                    parameters<span class=\"token punctuation\">[</span>paramKey<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span>\n                                        result<span class=\"token punctuation\">[</span>paramKeyResult<span class=\"token punctuation\">]</span>\n                                    <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>mainAliasName<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>primaryColumn<span class=\"token punctuation\">.</span>propertyPath<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">=:</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>paramKey<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n                                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n                                <span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">\" AND \"</span><span class=\"token punctuation\">)</span>\n                        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n                        <span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">\" OR \"</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">const</span> alias <span class=\"token operator\">=</span> DriverUtils<span class=\"token punctuation\">.</span><span class=\"token function\">buildAlias</span><span class=\"token punctuation\">(</span>\n                        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>connection<span class=\"token punctuation\">.</span>driver<span class=\"token punctuation\">,</span>\n                        <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token string\">\"ids_\"</span> <span class=\"token operator\">+</span> mainAliasName<span class=\"token punctuation\">,</span>\n                        metadata<span class=\"token punctuation\">.</span>primaryColumns<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>databaseName<span class=\"token punctuation\">,</span>\n                    <span class=\"token punctuation\">)</span>\n\n                    <span class=\"token keyword\">const</span> ids <span class=\"token operator\">=</span> rawResults<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> result<span class=\"token punctuation\">[</span>alias<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token keyword\">const</span> areAllNumbers <span class=\"token operator\">=</span> ids<span class=\"token punctuation\">.</span><span class=\"token function\">every</span><span class=\"token punctuation\">(</span>\n                        <span class=\"token punctuation\">(</span>id<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">typeof</span> id <span class=\"token operator\">===</span> <span class=\"token string\">\"number\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token punctuation\">)</span>\n                    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>areAllNumbers<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                        <span class=\"token comment\">// fixes #190. if all numbers then its safe to perform query without parameter</span>\n                        condition <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>mainAliasName<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>\n                            metadata<span class=\"token punctuation\">.</span>primaryColumns<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>propertyPath\n                        <span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> IN (</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>ids<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">\", \"</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)</span><span class=\"token template-punctuation string\">`</span></span>\n                    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                        parameters<span class=\"token punctuation\">[</span><span class=\"token string\">\"orm_distinct_ids\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> ids\n                        condition <span class=\"token operator\">=</span>\n                            mainAliasName <span class=\"token operator\">+</span>\n                            <span class=\"token string\">\".\"</span> <span class=\"token operator\">+</span>\n                            metadata<span class=\"token punctuation\">.</span>primaryColumns<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>propertyPath <span class=\"token operator\">+</span>\n                            <span class=\"token string\">\" IN (:...orm_distinct_ids)\"</span>\n                    <span class=\"token punctuation\">}</span>\n                <span class=\"token punctuation\">}</span>\n                rawResults <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">mergeExpressionMap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n                        extraAppendedAndWhereCondition<span class=\"token operator\">:</span> condition<span class=\"token punctuation\">,</span>\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">setParameters</span><span class=\"token punctuation\">(</span>parameters<span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">loadRawResults</span><span class=\"token punctuation\">(</span>queryRunner<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            rawResults <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">loadRawResults</span><span class=\"token punctuation\">(</span>queryRunner<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>rawResults<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// transform raw results into entities</span>\n            <span class=\"token keyword\">const</span> rawRelationIdResults <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> relationIdLoader<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span>rawResults<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">const</span> rawRelationCountResults <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> relationCountLoader<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span>\n                rawResults<span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">const</span> transformer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RawSqlResultsToEntityTransformer</span><span class=\"token punctuation\">(</span>\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">,</span>\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>connection<span class=\"token punctuation\">.</span>driver<span class=\"token punctuation\">,</span>\n                rawRelationIdResults<span class=\"token punctuation\">,</span>\n                rawRelationCountResults<span class=\"token punctuation\">,</span>\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>queryRunner<span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">)</span>\n            entities <span class=\"token operator\">=</span> transformer<span class=\"token punctuation\">.</span><span class=\"token function\">transform</span><span class=\"token punctuation\">(</span>\n                rawResults<span class=\"token punctuation\">,</span>\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>mainAlias<span class=\"token operator\">!</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">)</span>\n\n            <span class=\"token comment\">// broadcast all \"after load\" events</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>callListeners <span class=\"token operator\">===</span> <span class=\"token boolean\">true</span> <span class=\"token operator\">&amp;&amp;</span>\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>mainAlias<span class=\"token punctuation\">.</span>hasMetadata\n            <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">await</span> queryRunner<span class=\"token punctuation\">.</span>broadcaster<span class=\"token punctuation\">.</span><span class=\"token function\">broadcast</span><span class=\"token punctuation\">(</span>\n                    <span class=\"token string\">\"Load\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>mainAlias<span class=\"token punctuation\">.</span>metadata<span class=\"token punctuation\">,</span>\n                    entities<span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>relationLoadStrategy <span class=\"token operator\">===</span> <span class=\"token string\">\"query\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">const</span> queryStrategyRelationIdLoader <span class=\"token operator\">=</span>\n                <span class=\"token keyword\">new</span> <span class=\"token class-name\">QueryStrategyRelationIdLoader</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>connection<span class=\"token punctuation\">,</span> queryRunner<span class=\"token punctuation\">)</span>\n\n            <span class=\"token keyword\">await</span> <span class=\"token builtin\">Promise</span><span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span>\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>relationMetadatas<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>relation<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">const</span> relationTarget <span class=\"token operator\">=</span> relation<span class=\"token punctuation\">.</span>inverseEntityMetadata<span class=\"token punctuation\">.</span>target\n                    <span class=\"token keyword\">const</span> relationAlias <span class=\"token operator\">=</span>\n                        relation<span class=\"token punctuation\">.</span>inverseEntityMetadata<span class=\"token punctuation\">.</span>targetName\n\n                    <span class=\"token keyword\">const</span> select <span class=\"token operator\">=</span> <span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>findOptions<span class=\"token punctuation\">.</span>select<span class=\"token punctuation\">)</span>\n                        <span class=\"token operator\">?</span> OrmUtils<span class=\"token punctuation\">.</span><span class=\"token function\">propertyPathsToTruthyObject</span><span class=\"token punctuation\">(</span>\n                              <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>findOptions<span class=\"token punctuation\">.</span>select <span class=\"token keyword\">as</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                          <span class=\"token punctuation\">)</span>\n                        <span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>findOptions<span class=\"token punctuation\">.</span>select\n                    <span class=\"token keyword\">const</span> relations <span class=\"token operator\">=</span> <span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>findOptions<span class=\"token punctuation\">.</span>relations<span class=\"token punctuation\">)</span>\n                        <span class=\"token operator\">?</span> OrmUtils<span class=\"token punctuation\">.</span><span class=\"token function\">propertyPathsToTruthyObject</span><span class=\"token punctuation\">(</span>\n                              <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>findOptions<span class=\"token punctuation\">.</span>relations<span class=\"token punctuation\">,</span>\n                          <span class=\"token punctuation\">)</span>\n                        <span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>findOptions<span class=\"token punctuation\">.</span>relations\n\n                    <span class=\"token keyword\">const</span> queryBuilder <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createQueryBuilder</span><span class=\"token punctuation\">(</span>queryRunner<span class=\"token punctuation\">)</span>\n                        <span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span>relationAlias<span class=\"token punctuation\">)</span>\n                        <span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>relationTarget<span class=\"token punctuation\">,</span> relationAlias<span class=\"token punctuation\">)</span>\n                        <span class=\"token punctuation\">.</span><span class=\"token function\">setFindOptions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n                            select<span class=\"token operator\">:</span> select\n                                <span class=\"token operator\">?</span> OrmUtils<span class=\"token punctuation\">.</span><span class=\"token function\">deepValue</span><span class=\"token punctuation\">(</span>\n                                      select<span class=\"token punctuation\">,</span>\n                                      relation<span class=\"token punctuation\">.</span>propertyPath<span class=\"token punctuation\">,</span>\n                                  <span class=\"token punctuation\">)</span>\n                                <span class=\"token operator\">:</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">,</span>\n                            order<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>findOptions<span class=\"token punctuation\">.</span>order\n                                <span class=\"token operator\">?</span> OrmUtils<span class=\"token punctuation\">.</span><span class=\"token function\">deepValue</span><span class=\"token punctuation\">(</span>\n                                      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>findOptions<span class=\"token punctuation\">.</span>order<span class=\"token punctuation\">,</span>\n                                      relation<span class=\"token punctuation\">.</span>propertyPath<span class=\"token punctuation\">,</span>\n                                  <span class=\"token punctuation\">)</span>\n                                <span class=\"token operator\">:</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">,</span>\n                            relations<span class=\"token operator\">:</span> relations\n                                <span class=\"token operator\">?</span> OrmUtils<span class=\"token punctuation\">.</span><span class=\"token function\">deepValue</span><span class=\"token punctuation\">(</span>\n                                      relations<span class=\"token punctuation\">,</span>\n                                      relation<span class=\"token punctuation\">.</span>propertyPath<span class=\"token punctuation\">,</span>\n                                  <span class=\"token punctuation\">)</span>\n                                <span class=\"token operator\">:</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">,</span>\n                            withDeleted<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>findOptions<span class=\"token punctuation\">.</span>withDeleted<span class=\"token punctuation\">,</span>\n                            relationLoadStrategy<span class=\"token operator\">:</span>\n                                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>findOptions<span class=\"token punctuation\">.</span>relationLoadStrategy<span class=\"token punctuation\">,</span>\n                        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>entities<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                        <span class=\"token keyword\">const</span> relatedEntityGroups<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span>\n                            <span class=\"token keyword\">await</span> queryStrategyRelationIdLoader<span class=\"token punctuation\">.</span><span class=\"token function\">loadManyToManyRelationIdsAndGroup</span><span class=\"token punctuation\">(</span>\n                                relation<span class=\"token punctuation\">,</span>\n                                entities<span class=\"token punctuation\">,</span>\n                                <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">,</span>\n                                queryBuilder<span class=\"token punctuation\">,</span>\n                            <span class=\"token punctuation\">)</span>\n                        entities<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>entity<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                            <span class=\"token keyword\">const</span> relatedEntityGroup <span class=\"token operator\">=</span> relatedEntityGroups<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\n                                <span class=\"token punctuation\">(</span>group<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> group<span class=\"token punctuation\">.</span>entity <span class=\"token operator\">===</span> entity<span class=\"token punctuation\">,</span>\n                            <span class=\"token punctuation\">)</span>\n                            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>relatedEntityGroup<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                                <span class=\"token keyword\">const</span> value <span class=\"token operator\">=</span>\n                                    relatedEntityGroup<span class=\"token punctuation\">.</span>related <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span>\n                                        <span class=\"token operator\">?</span> <span class=\"token keyword\">null</span>\n                                        <span class=\"token operator\">:</span> relatedEntityGroup<span class=\"token punctuation\">.</span>related\n                                relation<span class=\"token punctuation\">.</span><span class=\"token function\">setEntityValue</span><span class=\"token punctuation\">(</span>entity<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span>\n                            <span class=\"token punctuation\">}</span>\n                        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">}</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n            raw<span class=\"token operator\">:</span> rawResults<span class=\"token punctuation\">,</span>\n            entities<span class=\"token operator\">:</span> entities<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p>굉장히 긴 코드가 나온다.</p>\n<p>위 코드는 우선 lock에 대한 예외처리가 되어 있고, <code class=\"language-text\">loadRawResults</code>에서 원시결과를 가져오는 것을 알 수 있다.\n그리고 가져온 원시결과를 <code class=\"language-text\">RawSqlResultsToEntityTransformer</code>클래스를 통해 엔티티로 변환하는 작업을 수행한다.\n마지막에는 관계에 따른 로딩에 관련된 내용이 나오고,\n원시결과와 엔티티를 반환한다.</p>\n<p>그럼 원시결과가 아닌 엔티티를 반환하는 <code class=\"language-text\">getMany()</code>에서의 특징은 무엇이 있을까?</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> queryBuilder <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>serviceRepository\n  <span class=\"token punctuation\">.</span><span class=\"token function\">createQueryBuilder</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"service\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"service\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"mapper\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">leftJoin</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"service.categoryMapper\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"mapper\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"service.status = :status\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> status<span class=\"token operator\">:</span> <span class=\"token string\">\"Applying\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">getMany</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>위 코드는 service 테이블에서 mapper 테이블을 조인한 코드이다.\n<code class=\"language-text\">select</code>를 하지 않으면 조인을 했어도 기존(service) 엔티티만을 반환한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// 결과값</span>\n<span class=\"token comment\">// [</span>\n<span class=\"token comment\">//   {...service entity, ...mapper entity}...</span>\n<span class=\"token comment\">// ]</span></code></pre></div>\n<p>위의 결과를 받을 수 있다.</p>\n<p>여기서 추가적으로 mapper entity에서의 일부 값을 가져온다고 했을 때\n즉, <code class=\"language-text\">select('service','mapper.maincategoryid')</code> 이런식으로 가져오게 된다면\n결과값에서 mapper entity 는 {maincategoryid : xx}가 될 것이다.</p>\n<p>여기서 mapper entity의 다른 값에 접근을 하게 된다면 undefined가 나오게 된다.</p>\n<p>이제 <code class=\"language-text\">getRawMany()</code>를 봐보면</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">/**\n     * Gets all raw results returned by execution of generated query builder sql.\n     */</span>\n    <span class=\"token generic-function\"><span class=\"token function\">getRawMany</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">getMany</code>와 다르게 엔티티가 아닌 raw results 즉 원시결과를 가져오는 메서드이다.</p>\n<p>소스코드를 보면</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">async</span> <span class=\"token generic-function\"><span class=\"token function\">getRawMany</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>lockMode <span class=\"token operator\">===</span> <span class=\"token string\">\"optimistic\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">OptimisticLockCanNotBeUsedError</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>queryEntity <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n        <span class=\"token keyword\">const</span> queryRunner <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">obtainQueryRunner</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">let</span> transactionStartedByUs<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// start transaction if it was enabled</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expressionMap<span class=\"token punctuation\">.</span>useTransaction <span class=\"token operator\">===</span> <span class=\"token boolean\">true</span> <span class=\"token operator\">&amp;&amp;</span>\n                queryRunner<span class=\"token punctuation\">.</span>isTransactionActive <span class=\"token operator\">===</span> <span class=\"token boolean\">false</span>\n            <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">await</span> queryRunner<span class=\"token punctuation\">.</span><span class=\"token function\">startTransaction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                transactionStartedByUs <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">const</span> results <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">loadRawResults</span><span class=\"token punctuation\">(</span>queryRunner<span class=\"token punctuation\">)</span>\n\n            <span class=\"token comment\">// close transaction if we started it</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>transactionStartedByUs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">await</span> queryRunner<span class=\"token punctuation\">.</span><span class=\"token function\">commitTransaction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">return</span> results\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// rollback transaction if we started it</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>transactionStartedByUs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">await</span> queryRunner<span class=\"token punctuation\">.</span><span class=\"token function\">rollbackTransaction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>rollbackError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">throw</span> error\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>queryRunner <span class=\"token operator\">!==</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>queryRunner<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token comment\">// means we created our own query runner</span>\n                <span class=\"token keyword\">await</span> queryRunner<span class=\"token punctuation\">.</span><span class=\"token function\">release</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p>트랜잭션으로 <code class=\"language-text\">loadRawResults</code>가 감싸져 있고 <code class=\"language-text\">loadRawResults</code>를 통해 가져온 원시결과를 반환하는 것을 알 수 있다.\n<code class=\"language-text\">loadRawResults</code>는 원시 결과를 가져오는 메서드이므로 <code class=\"language-text\">getRawMany</code>는 쿼리 결과를 순수한 JSON 객체의 배열로 반환한다.</p>\n<p>원시결과를 반환하는 <code class=\"language-text\">getRawMany</code>에는 어떤 특징이 있을까?</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> queryBuilder <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>serviceRepository\n  <span class=\"token punctuation\">.</span><span class=\"token function\">createQueryBuilder</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"service\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"service\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"mapper\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">leftJoin</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"service.categoryMapper\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"mapper\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"service.status = :status\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> status<span class=\"token operator\">:</span> <span class=\"token string\">\"Applying\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">getRawMany</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>아까와 같은 service entity에서 mapper entity를 조인한 결과를 가져오는 쿼리빌더이다.\n<code class=\"language-text\">getRawMany</code>는 JSON 객체이기 때문에 반환값에 각각의 alias가 붙어있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token punctuation\">{</span>\n  service_xx<span class=\"token punctuation\">,</span>\n  service_xxx<span class=\"token punctuation\">,</span>\n  mapper_xx<span class=\"token punctuation\">,</span>\n  mapper_xxx<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">getMany</code>와 다른 점은 엔티티화 되어 있지 않기 때문에 조인한 테이블도 위처럼 하나의 객체안에 들어있고,\n원시결과이기 때문에 공식문서에도 나와 있듯이 데이터를 통한 합계를 내거나 하는 작업을 할 수 있다.\nBut sometimes you need to select some specific data, let’s say the sum of all user photos. This data is not an entity, it’s called raw data. To get raw data, you use getRawOne and getRawMany.\n예를 들자면</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\">ex<span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"AVG(table.int) as avgStarPoint\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">IF(조건 IS NOT NULL, true, false) AS alias</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SUM(user.photosCount)\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"sum\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이러한 작업들을 할 수 있다고 볼 수 있다.</p>\n<p>또한 <code class=\"language-text\">getRawMany</code>를 사용 할 때 <code class=\"language-text\">select('entity.*')</code>을 사용하면\nentity_xx 이렇게 나오는 것을 xx 이렇게 나오게 할 수 있다.</p>\n<p>그리고 원시결과에 접근하는 <code class=\"language-text\">getRawMany</code>는 결과값을 잘라낼 때 (ex . 페이지네이션)\nskip, take가 아니라 offset, limit을 사용해야 한다.\nskip과 take를 사용하면 적용이 되지 않아 전체가 나오는 것을 볼 수 있다.</p>\n<p>순수하게 엔티티만 반환하는 api에서는 <code class=\"language-text\">getMany</code>가 보다 더 깔끔하게 보여줄 수 있고,\n순수한 데이터가 필요한 경우거나 특정 열만 선택하는 경우 <code class=\"language-text\">getRawMany</code>가 보다 유용하다.</p>","fields":{"slug":"/posts/2023-10-10---typeorm getMany(), getRawMany()/","tagSlugs":["/tag/typeorm/"]},"frontmatter":{"date":"2023-10-10T22:36:37.121Z","description":"typeorm getMany(), getRawMany()","tags":["typeorm"],"title":"typeorm getMany(), getRawMany()","socialImage":null}}},"pageContext":{"slug":"/posts/2023-10-10---typeorm getMany(), getRawMany()/"}},"staticQueryHashes":["251939775","2764776372","401334301"]}